<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>SpacePaint</title>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <link rel="stylesheet" href="./style.css"/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.js" integrity="sha512-ozq8xQKq6urvuU6jNgkfqAmT7jKN2XumbrX1JiB3TnF7tI48DPI4Gy1GXKD/V3EExgAs1V+pRO7vwtS1LHg0Gw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- TODO: add integrity -->
    <script src="node_modules/leaflet-toolbar/dist/leaflet.toolbar.js"></script>
    <link rel="stylesheet" href="node_modules/leaflet-toolbar/dist/leaflet.toolbar.css"/>
    <script type="module" src="./index.js"></script>
</head>
<body>
    <main id="map-page">
        <div id="map"></div>
    </main>
    <script type="module">
        import init, { greet } from "./png-decoder/pkg/png_decoder.js";
        init().then(() => {
          greet("WebAssembly");
        });
      </script>

    <!-- Modal adapted from assignment 3 -->
    <div id="modal-backdrop" class="hidden"></div>
    <div id="about-modal" class="hidden">
        <div class="modal-dialog">
            <div class="modal-header">
              <h3>Space Paint</h3>
              <button type="button" onclick="toggleAboutModal()" id="modal-close" class="modal-hide-button">&times;</button>
            </div>

            <div class="modal-body">
    
              <div class="about-element" >
                <h3>Welcome to the space laser weather control panel!</h3>
                <p>
                Here you can use our inclined satellite constellation to control the world's weather. 
                Unfortunately, due to congressional budget cuts we were unable to get polar coverage.
                </p>
                <div id="space-laser-img-container">
                <figure>
                <img id="space-laser-img" src="./images/space-laser.png" alt="Space Laser">
                <figcaption>LANCER satellite in block 4</figcaption>
                </figure>
                </div>
              </div>

              <div class="about-element">
                <h3>Views</h3>
                <p>
                  We have three view layers you can overlay. <b>Cloud map</b>, <b>heat map</b>, and <b>wind map</b>. 
                  Each view can be separately toggled, by default all three are <b>enabled</b>.
                </p>
              </div>

              <div class="about-element">
                <h3>Controls</h3>
                <p>
                  We have three weather elements you can control. <b>Clouds</b>, <b>heat</b>, and <b>wind</b>. 
                  Each control can be toggled between disabled, increase, and decrease. Only one control may be active at a time. 
                  By default all three are <b>disabled</b>. You edit the weather by drawing lines on the map. 
                  In addition the diameter of the laser weather edit can be controlled by the diameter control range. 
                  Click in the range to change the diameter.

                </p>
                <p>
                  Click and hold while dragging to move around the map.
                </p>
                <p>
                  With a weather control enabled, click and drag without holding to draw a weather edit, 
                  click again to end the line.
                </p>
              </div>

    
              
            </div>
    
            <div class="modal-footer">
              <button onclick="toggleAboutModal()" type="button" id="modal-close-bottom" class="modal-hide-button action-button">Close</button>
            </div>
    
          </div>
        </div>
</body>
</html>
